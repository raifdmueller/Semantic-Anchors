= Use Cases: Semantic Anchors Website
:toc: left
:toclevels: 3
:icons: font

== √úbersicht

Dieses Dokument beschreibt die Use Cases f√ºr die Semantic Anchors Website.

== UC-01: Semantische Anker nach Rolle filtern

=== Akteure
* Benutzer (Software Developer, Architect, Product Owner, etc.)

=== Vorbedingungen
* Website ist geladen
* Anker-Daten sind verf√ºgbar

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer √∂ffnet Website;
:System zeigt alle Kategorien in Treemap;
:Benutzer klickt auf "Filter by Role";
:System zeigt Liste verf√ºgbarer Rollen;
:Benutzer w√§hlt eine oder mehrere Rollen;
if (Rolle(n) ausgew√§hlt?) then (ja)
  :System filtert Anker nach Rolle(n);
  :System aktualisiert Treemap mit gefilterten Ankern;
  :System zeigt Anzahl gefilterter Anker;
else (nein)
  :System zeigt alle Anker;
endif
:Benutzer sieht gefilterte Anker;
stop
@enduml
----

=== Nachbedingungen
* Treemap zeigt nur Anker der ausgew√§hlten Rolle(n)
* URL enth√§lt Filter-Parameter (f√ºr Deep-Linking)
* Filter-Auswahl wird in localStorage persistiert

=== Fehlerszenarien
* **F1**: Keine Anker f√ºr ausgew√§hlte Rolle ‚Üí System zeigt "Keine Anker gefunden f√ºr diese Rolle"
* **F2**: Browser-localStorage nicht verf√ºgbar ‚Üí Filter wird nicht persistiert, aber funktioniert w√§hrend Session

---

== UC-02: Semantische Anker in Treemap visualisieren

=== Akteure
* Benutzer

=== Vorbedingungen
* Website ist geladen
* Anker-Metadata ist verf√ºgbar

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer √∂ffnet Website;
:System l√§dt Anker-Metadata;
:System generiert Treemap-Daten aus Kategorien;
:System rendert interaktive Treemap;
note right
  Gr√∂√üe = Anzahl Anker pro Kategorie
  Farbe = Kategorie-Typ
end note
:Benutzer sieht Treemap;
if (Benutzer f√§hrt mit Maus √ºber Kategorie?) then (ja)
  :System zeigt Tooltip mit Details;
  note right
    - Kategorie-Name
    - Anzahl Anker
    - Prozent vom Gesamt
  end note
endif
if (Benutzer klickt auf Kategorie?) then (ja)
  :System navigiert zu Kategorie-Seite;
  :System zeigt alle Anker dieser Kategorie;
endif
stop
@enduml
----

=== Nachbedingungen
* Treemap ist interaktiv und responsive
* Kategorien sind proportional zur Anzahl ihrer Anker dargestellt

=== Fehlerszenarien
* **F1**: Metadata-Datei nicht gefunden ‚Üí System zeigt Fehlermeldung "Kategorien k√∂nnen nicht geladen werden"
* **F2**: Sehr kleine Bildschirmgr√∂√üe ‚Üí Treemap wird zu vereinfachter Liste

---

== UC-03: Semantische Anker durchsuchen

=== Akteure
* Benutzer

=== Vorbedingungen
* Website ist geladen
* Anker-Index ist verf√ºgbar

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer gibt Suchbegriff ein;
:System sucht in Echtzeit (debounced);
note right
  Suche in:
  - Anker-Namen
  - Proponenten
  - Core Concepts
  - Tags
end note
if (Ergebnisse gefunden?) then (ja)
  :System zeigt Ergebnisliste;
  :System highlighted Suchbegriff in Ergebnissen;
  if (Benutzer klickt auf Ergebnis?) then (ja)
    :System navigiert zu Anker-Details;
  endif
else (nein)
  :System zeigt "Keine Ergebnisse gefunden";
  :System zeigt √§hnliche Begriffe (optional);
endif
stop
@enduml
----

=== Nachbedingungen
* Suchergebnisse sind nach Relevanz sortiert
* URL enth√§lt Suchquery (f√ºr Deep-Linking)

=== Fehlerszenarien
* **F1**: Suchindex nicht geladen ‚Üí System zeigt "Suche vor√ºbergehend nicht verf√ºgbar"
* **F2**: Sehr lange Suchbegriffe ‚Üí System limitiert auf 100 Zeichen

---

== UC-04: Anker-Details anzeigen

=== Akteure
* Benutzer

=== Vorbedingungen
* Anker existiert im System

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer w√§hlt Anker aus (via Treemap, Suche oder Link);
:System l√§dt Anker-AsciiDoc-Datei;
:System rendert AsciiDoc zu HTML mit asciidoctor.js;
:System zeigt Anker-Details;
note right
  - Full Name
  - Core Concepts
  - Key Proponents
  - When to Use
  - Related Concepts (verlinkt)
end note
if (Related Concepts vorhanden?) then (ja)
  :System zeigt Related Anchors als Links;
  if (Benutzer klickt auf Related Anchor?) then (ja)
    :System navigiert zu Related Anchor;
  endif
endif
if (Benutzer klickt auf "Collapsible" erweitern?) then (ja)
  :System expandiert Collapsible Section;
endif
stop
@enduml
----

=== Nachbedingungen
* Anker-Details sind vollst√§ndig und formatiert dargestellt
* Related Anchors sind anklickbar
* URL zeigt Anker-ID (Deep-Linking m√∂glich)

=== Fehlerszenarien
* **F1**: Anker-Datei nicht gefunden ‚Üí System zeigt 404 Seite
* **F2**: AsciiDoc-Rendering fehlgeschlagen ‚Üí System zeigt Plain-Text Fallback

---

== UC-05: Sprache wechseln (EN/DE)

=== Akteure
* Benutzer

=== Vorbedingungen
* Website ist geladen

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer klickt auf Language Switcher;
:System zeigt verf√ºgbare Sprachen (EN, DE);
:Benutzer w√§hlt Sprache;
:System aktualisiert UI-Texte;
note right
  √úbersetzt werden:
  - Navigation
  - Labels
  - Buttons
  - Tooltips
  (NICHT Anker-Content selbst)
end note
:System speichert Pr√§ferenz in localStorage;
:System aktualisiert html lang Attribut;
stop
@enduml
----

=== Nachbedingungen
* Alle UI-Elemente sind in gew√§hlter Sprache
* Sprachpr√§ferenz wird bei n√§chstem Besuch beibehalten
* `<html lang="...">` ist korrekt gesetzt

=== Fehlerszenarien
* **F1**: √úbersetzung fehlt ‚Üí System zeigt Fallback auf Englisch
* **F2**: localStorage nicht verf√ºgbar ‚Üí Sprache nur f√ºr aktuelle Session

---

== UC-06: Theme wechseln (Dark/Light)

=== Akteure
* Benutzer

=== Vorbedingungen
* Website ist geladen

=== Ablauf

[plantuml]
----
@startuml
start
:System erkennt bevorzugtes Theme;
note right
  Reihenfolge:
  1. localStorage
  2. prefers-color-scheme
  3. Default: Light
end note
:System wendet Theme an;
if (Benutzer klickt auf Theme Toggle?) then (ja)
  :System wechselt Theme (Light ‚Üî Dark);
  :System aktualisiert CSS Variablen;
  :System speichert Pr√§ferenz in localStorage;
  :System aktualisiert Icon (‚òÄÔ∏è ‚Üî üåô);
endif
stop
@enduml
----

=== Nachbedingungen
* Theme wird sofort ohne Flackern angewendet
* Theme-Pr√§ferenz wird persistiert
* Alle Komponenten (inkl. Treemap) respektieren Theme

=== Fehlerszenarien
* **F1**: localStorage nicht verf√ºgbar ‚Üí Theme nur f√ºr Session, reagiert auf prefers-color-scheme
* **F2**: Theme-CSS nicht geladen ‚Üí Fallback auf System-Theme

---

== UC-07: Neuen semantischen Anker vorschlagen

=== Akteure
* Contributor (externe Person, die einen Anker vorschlagen m√∂chte)

=== Vorbedingungen
* Contributor hat GitHub-Account
* Contributor kennt den Begriff, den er vorschlagen m√∂chte

=== Ablauf

[plantuml]
----
@startuml
start
:Contributor klickt auf "Suggest New Anchor";
:System √∂ffnet GitHub Issue Template;
:Contributor f√ºllt Formular aus;
note right
  - Anchor Name
  - Why is this a semantic anchor?
  - Key Proponents (optional)
  - Use Cases (optional)
end note
:Contributor submitted Issue;
:GitHub Actions Workflow wird getriggert;
:System analysiert Begriff mit GitHub Copilot;
if (Begriff qualifiziert als Semantic Anchor?) then (ja)
  :System kommentiert: "‚úÖ Looks good! Maintainer will review";
  :System f√ºgt Label "semantic-anchor: valid" hinzu;
else (nein)
  :System kommentiert mit Feedback;
  note right
    Z.B.: "This seems more like
    an instruction than a
    semantic anchor. Please see
    quality criteria..."
  end note
  :System f√ºgt Label "needs-clarification" hinzu;
endif
:Maintainer reviewed Issue;
if (Maintainer approved?) then (ja)
  :Maintainer assigned Issue to Copilot;
  :Copilot generiert AsciiDoc Entry;
  :Copilot creates PR;
  :Maintainer merged PR;
else (nein)
  :Maintainer closes Issue mit Begr√ºndung;
endif
stop
@enduml
----

=== Nachbedingungen
* Issue ist erstellt mit korrektem Label
* Automatisches Feedback ist gepostet (bei Validation)
* Bei Approval: PR ist erstellt mit generiertem Content

=== Fehlerszenarien
* **F1**: GitHub Actions Workflow schl√§gt fehl ‚Üí Issue bleibt ohne Auto-Comment, manueller Review n√∂tig
* **F2**: Copilot API nicht verf√ºgbar ‚Üí Maintainer erstellt Entry manuell
* **F3**: Issue-Template nicht ausgef√ºllt ‚Üí Bot kommentiert "Please fill out all required fields"

---

== UC-08: Anker-Beitrag validieren (GitHub Actions)

=== Akteure
* GitHub Actions Workflow
* GitHub Copilot API

=== Vorbedingungen
* Issue wurde mit Label "new-anchor" erstellt
* GitHub Copilot API Key ist konfiguriert

=== Ablauf

[plantuml]
----
@startuml
start
:Issue erstellt mit Label "new-anchor";
:Workflow getriggert;
:System extrahiert Anchor Name aus Issue;
:System extrahiert Begr√ºndung;
:System sendet Prompt an Copilot API;
note right
  Prompt:
  "Evaluate if '<term>' qualifies
  as a semantic anchor based on:
  - Precise
  - Rich
  - Consistent
  - Attributable"
end note
:Copilot analysiert und antwortet;
if (Copilot Score > 7/10?) then (ja)
  :System postet positiven Comment;
  :System f√ºgt Label "validated" hinzu;
else (nein)
  :System postet Feedback mit Gr√ºnden;
  :System f√ºgt Label "needs-clarification" hinzu;
  :System schl√§gt Verbesserungen vor;
endif
stop
@enduml
----

=== Nachbedingungen
* Issue hat Validation Comment
* Issue hat passendes Label
* Contributor hat klares Feedback

=== Fehlerszenarien
* **F1**: Copilot API Timeout ‚Üí Workflow posted "Validation failed, manual review required"
* **F2**: Issue-Body unlesbar ‚Üí Workflow posted "Cannot parse issue, please use template"
* **F3**: API Rate Limit ‚Üí Workflow queued, Retry sp√§ter

---

== UC-09: Related Anchors navigieren

=== Akteure
* Benutzer

=== Vorbedingungen
* Benutzer betrachtet Anker-Details
* Anker hat Related Anchors definiert

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer sieht Anker-Details;
:System zeigt "Related Concepts" Section;
if (Related Anchors vorhanden?) then (ja)
  :System zeigt Liste von Related Anchors;
  note right
    Jeder Link zeigt:
    - Anker-Name
    - Mini-Preview (optional)
  end note
  if (Benutzer klickt auf Related Anchor?) then (ja)
    :System navigiert zu Related Anchor;
    :Browser-History wird aktualisiert;
    :Benutzer kann zur√ºck navigieren;
  endif
else (nein)
  :System zeigt "No related anchors";
endif
stop
@enduml
----

=== Nachbedingungen
* Navigation funktioniert bidirektional (vor/zur√ºck)
* Related Anchors sind visuell hervorgehoben

=== Fehlerszenarien
* **F1**: Related Anchor existiert nicht mehr ‚Üí System zeigt 404, schl√§gt √§hnliche vor
* **F2**: Zirkul√§re Referenzen ‚Üí System zeigt alle, aber markiert bereits besuchte

---

== UC-10: Direkt zu Anker verlinken (Deep-Linking)

=== Akteure
* Benutzer (extern, folgt Link)

=== Vorbedingungen
* Benutzer hat URL zu spezifischem Anker

=== Ablauf

[plantuml]
----
@startuml
start
:Benutzer √∂ffnet Deep-Link;
note right
  Format: /anchor/<anchor-id>
  oder: /#<anchor-id>
end note
:System parsed URL;
if (Anker-ID g√ºltig?) then (ja)
  :System l√§dt Anker-Details;
  :System scrollt zu Anker (falls auf Kategorie-Seite);
  :System highlighted Anker visuell;
  if (URL enth√§lt Filter/Language Parameter?) then (ja)
    :System wendet Filter/Language an;
  endif
else (nein)
  :System zeigt 404 Seite;
  :System schl√§gt √§hnliche Anker vor;
endif
stop
@enduml
----

=== Nachbedingungen
* Benutzer sieht korrekten Anker
* URL ist share-bar (kopierbar)
* State (Filter, Language) ist in URL kodiert

=== Fehlerszenarien
* **F1**: Anker-ID ung√ºltig ‚Üí 404 Seite mit Suchfunktion
* **F2**: Alter Link (nach Rename) ‚Üí System zeigt Redirect-Hinweis oder 301 Redirect
* **F3**: Hash-Fragment nicht unterst√ºtzt ‚Üí Fallback auf normale Navigation

---

== Zusammenfassung Use Cases

[cols="1,3,2", options="header"]
|===
|UC-ID |Name |Priorit√§t

|UC-01 |Semantische Anker nach Rolle filtern |Hoch
|UC-02 |Semantische Anker in Treemap visualisieren |Hoch
|UC-03 |Semantische Anker durchsuchen |Hoch
|UC-04 |Anker-Details anzeigen |Kritisch
|UC-05 |Sprache wechseln (EN/DE) |Mittel
|UC-06 |Theme wechseln (Dark/Light) |Mittel
|UC-07 |Neuen semantischen Anker vorschlagen |Hoch
|UC-08 |Anker-Beitrag validieren (GitHub Actions) |Mittel
|UC-09 |Related Anchors navigieren |Mittel
|UC-10 |Direkt zu Anker verlinken (Deep-Linking) |Hoch
|===
